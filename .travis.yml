language: dart
dart:
- dev
- stable

install:
- pip install --user pygments

script:
- dart2js --checked --enable-diagnostic-colors --out=hello.js hello.dart
- node hello.js

- dart2js --checked --enable-diagnostic-colors --out=fibonacci.js fibonacci.dart
- node fibonacci.js

- dart2js --checked --enable-diagnostic-colors --out=point.js point.dart
- node point.js

- dart2js --checked --enable-diagnostic-colors --out=http_server.js http_server.dart
- node http_server.js &
# - dart http_server.dart &
- printf 'HEAD /dart HTTP/1.1\r\n\r\n' | socat - TCP4:localhost:8888,forever >/dev/null # Waiting for server to connect.
- wget --quiet --output-document=- localhost:8888/dart

after_script:
- dart --verbose --help --enable-diagnostic-colors
- dart2js --verbose --help --enable-diagnostic-colors

- printenv TERM

- echo dart2js produces hard to read js:
- cat hello.js
# - pygmentize -P style=vim -f html -O full -P linenos=1 hello.js | elinks -force-html -dump-color-mode 1 -dump # Best for js
